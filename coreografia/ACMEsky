(( query: ACMEsky -> flyCompany ; response: flyCompany -> ACMEsky)* | (sendLastMinute: flyCompany -> ACMEsky )* ) |
( // Richiesta del volo
    request: user -> ACMEsky ; 
    (
        (
            foundOffer: ACMEsky -> Prontogram ; 
            ( // Utente conferma offerta
                (confirmOffer: user -> ACMEsky ; sendBankService: ACMEsky -> user ; payment: user -> BankService ;  
                    (
                        (successPayment: BankService -> ACMEsky;
                            ( // Richiesta a GeoDistanceService se costo > 1000
                                1 + 
                                (askForDistance: ACMEsky -> GeoDistanceService ; distanceResponse: GeoDistanceService -> ACMEsky; 
                                    ( // Richiesta alla compagnia di nolleggio
                                        1 +  (askForRent: ACMEsky -> RentCompany; responseForRent: RentCompany-> ACMEsky )
                                        // sequenza 1 + (askForRent: a -> g; responseForRent: g-> a )
                                    )
                                )
                            )
                        ) ; successOrder: ACMEsky -> user; stopTimeout: ACMEsky -> Prontogram
                    )
                    +
                    (failPayment: BankService -> ACMEsky; failOrder: ACMEsky -> user )
                )
            )
        ) | // Timeout offerta scaduto
        timeout: ACMEsky -> Prontogram
    )
)*
