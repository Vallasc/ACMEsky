<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_0b8mwhi" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.3.0">
  <bpmn:collaboration id="Collaboration_0m8rgth">
    <bpmn:participant id="Participant_02qx8sd" name="User" processRef="Process_0mzkuh5" />
    <bpmn:participant id="Participant_14wuqr7" processRef="Process_0x1ot19" />
    <bpmn:participant id="Participant_0fvx3ze" name="Prontogram" processRef="Process_1o7cjkr" />
    <bpmn:messageFlow id="Flow_1k8m9na" sourceRef="Activity_0z8iofb" targetRef="Event_0iuir4k" />
    <bpmn:messageFlow id="Flow_1qowbtb" sourceRef="Activity_0r7jvgn" targetRef="Event_1ia8me7" />
    <bpmn:messageFlow id="Flow_0ei1d5f" sourceRef="Activity_0jn957p" targetRef="Activity_0r7jvgn" />
    <bpmn:messageFlow id="Flow_0qpb6uo" sourceRef="Activity_0vqkz67" targetRef="Activity_0r7jvgn" />
  </bpmn:collaboration>
  <bpmn:process id="Process_0mzkuh5" isExecutable="false">
    <bpmn:sequenceFlow id="Flow_1llxqwb" sourceRef="Event_0iuir4k" targetRef="Activity_0r7jvgn" />
    <bpmn:startEvent id="Event_0iuir4k" name="Receive offer token">
      <bpmn:outgoing>Flow_1llxqwb</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0jsjtck" />
    </bpmn:startEvent>
    <bpmn:userTask id="Activity_0r7jvgn" name="Confirm offer with token">
      <bpmn:incoming>Flow_1llxqwb</bpmn:incoming>
    </bpmn:userTask>
  </bpmn:process>
  <bpmn:process id="Process_0x1ot19" isExecutable="false">
    <bpmn:serviceTask id="Activity_1vlshwr" name="Retreive offer">
      <bpmn:incoming>Flow_0yho0zi</bpmn:incoming>
      <bpmn:outgoing>Flow_02g1lhk</bpmn:outgoing>
      <bpmn:property id="Property_00e3hzt" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_0k9ic5c">
        <bpmn:sourceRef>DataStoreReference_0u8wers</bpmn:sourceRef>
        <bpmn:targetRef>Property_00e3hzt</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:subProcess id="Activity_1qbxywg" name="Check offer">
      <bpmn:incoming>Flow_02g1lhk</bpmn:incoming>
      <bpmn:startEvent id="Event_1y138le">
        <bpmn:outgoing>Flow_15ey7dv</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:exclusiveGateway id="Gateway_1qj5yon" name="Valid token?">
        <bpmn:incoming>Flow_15ey7dv</bpmn:incoming>
        <bpmn:outgoing>Flow_1ifywnr</bpmn:outgoing>
        <bpmn:outgoing>Flow_0u2z9cw</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:exclusiveGateway id="Gateway_13dfhiy" name="Offer expired?">
        <bpmn:incoming>Flow_0u2z9cw</bpmn:incoming>
        <bpmn:outgoing>Flow_0jm0736</bpmn:outgoing>
        <bpmn:outgoing>Flow_0r1g7iu</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:endEvent id="Event_1bvrgar">
        <bpmn:incoming>Flow_0yv07w3</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sendTask id="Activity_0vqkz67" name="Send success">
        <bpmn:incoming>Flow_0jm0736</bpmn:incoming>
        <bpmn:outgoing>Flow_0yv07w3</bpmn:outgoing>
      </bpmn:sendTask>
      <bpmn:sendTask id="Activity_0jn957p" name="Send error">
        <bpmn:incoming>Flow_1ifywnr</bpmn:incoming>
        <bpmn:incoming>Flow_0r1g7iu</bpmn:incoming>
        <bpmn:outgoing>Flow_1il1922</bpmn:outgoing>
      </bpmn:sendTask>
      <bpmn:endEvent id="Event_0jm5ix8" name="Offer error">
        <bpmn:incoming>Flow_1il1922</bpmn:incoming>
        <bpmn:errorEventDefinition id="ErrorEventDefinition_0eewidq" />
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_1il1922" sourceRef="Activity_0jn957p" targetRef="Event_0jm5ix8" />
      <bpmn:sequenceFlow id="Flow_0yv07w3" sourceRef="Activity_0vqkz67" targetRef="Event_1bvrgar" />
      <bpmn:sequenceFlow id="Flow_0jm0736" name="No" sourceRef="Gateway_13dfhiy" targetRef="Activity_0vqkz67" />
      <bpmn:sequenceFlow id="Flow_1ifywnr" name="No" sourceRef="Gateway_1qj5yon" targetRef="Activity_0jn957p" />
      <bpmn:sequenceFlow id="Flow_0u2z9cw" name="Yes" sourceRef="Gateway_1qj5yon" targetRef="Gateway_13dfhiy" />
      <bpmn:sequenceFlow id="Flow_0r1g7iu" name="Yes" sourceRef="Gateway_13dfhiy" targetRef="Activity_0jn957p" />
      <bpmn:sequenceFlow id="Flow_15ey7dv" sourceRef="Event_1y138le" targetRef="Gateway_1qj5yon" />
    </bpmn:subProcess>
    <bpmn:boundaryEvent id="Event_1hbwfmo" name="Error" attachedToRef="Activity_1qbxywg">
      <bpmn:outgoing>Flow_145aoik</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0kwqzlh" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0yho0zi" sourceRef="Event_1ia8me7" targetRef="Activity_1vlshwr" />
    <bpmn:sequenceFlow id="Flow_02g1lhk" sourceRef="Activity_1vlshwr" targetRef="Activity_1qbxywg" />
    <bpmn:dataStoreReference id="DataStoreReference_0u8wers" name="Generated offers" />
    <bpmn:endEvent id="Event_1uxcau0" name="Exit">
      <bpmn:incoming>Flow_145aoik</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_145aoik" sourceRef="Event_1hbwfmo" targetRef="Event_1uxcau0" />
    <bpmn:startEvent id="Event_1ia8me7" name="Token received">
      <bpmn:outgoing>Flow_0yho0zi</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0ftbh4f" />
    </bpmn:startEvent>
  </bpmn:process>
  <bpmn:process id="Process_1o7cjkr" isExecutable="false">
    <bpmn:startEvent id="Event_06ciytq">
      <bpmn:outgoing>Flow_1sd3xii</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_07bwy6o" />
    </bpmn:startEvent>
    <bpmn:endEvent id="Event_0gr7u82">
      <bpmn:incoming>Flow_05mxbse</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sendTask id="Activity_0z8iofb" name="Notify user">
      <bpmn:incoming>Flow_1sd3xii</bpmn:incoming>
      <bpmn:outgoing>Flow_05mxbse</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sequenceFlow id="Flow_05mxbse" sourceRef="Activity_0z8iofb" targetRef="Event_0gr7u82" />
    <bpmn:sequenceFlow id="Flow_1sd3xii" sourceRef="Event_06ciytq" targetRef="Activity_0z8iofb" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0m8rgth">
      <bpmndi:BPMNShape id="Participant_02qx8sd_di" bpmnElement="Participant_02qx8sd" isHorizontal="true">
        <dc:Bounds x="150" y="80" width="1460" height="120" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1llxqwb_di" bpmnElement="Flow_1llxqwb">
        <di:waypoint x="438" y="140" />
        <di:waypoint x="1200" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_0iuir4k_di" bpmnElement="Event_0iuir4k">
        <dc:Bounds x="402" y="122" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="388" y="92" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0r7jvgn_di" bpmnElement="Activity_0r7jvgn">
        <dc:Bounds x="1200" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_14wuqr7_di" bpmnElement="Participant_14wuqr7" isHorizontal="true">
        <dc:Bounds x="560" y="230" width="1050" height="360" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_02g1lhk_di" bpmnElement="Flow_02g1lhk">
        <di:waypoint x="850" y="310" />
        <di:waypoint x="910" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yho0zi_di" bpmnElement="Flow_0yho0zi">
        <di:waypoint x="668" y="310" />
        <di:waypoint x="750" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_145aoik_di" bpmnElement="Flow_145aoik">
        <di:waypoint x="1511" y="280" />
        <di:waypoint x="1552" y="280" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Activity_1vlshwr_di" bpmnElement="Activity_1vlshwr">
        <dc:Bounds x="750" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1uxcau0_di" bpmnElement="Event_1uxcau0">
        <dc:Bounds x="1552" y="262" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1560" y="308" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ia8me7_di" bpmnElement="Event_1ia8me7">
        <dc:Bounds x="632" y="292" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="614" y="333" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qbxywg_di" bpmnElement="Activity_1qbxywg" isExpanded="true">
        <dc:Bounds x="910" y="250" width="583" height="320" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_15ey7dv_di" bpmnElement="Flow_15ey7dv">
        <di:waypoint x="966" y="400" />
        <di:waypoint x="1003" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0r1g7iu_di" bpmnElement="Flow_0r1g7iu">
        <di:waypoint x="1143" y="455" />
        <di:waypoint x="1143" y="350" />
        <di:waypoint x="1190" y="350" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1150" y="403" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0u2z9cw_di" bpmnElement="Flow_0u2z9cw">
        <di:waypoint x="1028" y="425" />
        <di:waypoint x="1028" y="480" />
        <di:waypoint x="1118" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1035" y="450" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ifywnr_di" bpmnElement="Flow_1ifywnr">
        <di:waypoint x="1028" y="375" />
        <di:waypoint x="1028" y="320" />
        <di:waypoint x="1190" y="320" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1036" y="345" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jm0736_di" bpmnElement="Flow_0jm0736">
        <di:waypoint x="1168" y="480" />
        <di:waypoint x="1273" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1213" y="462" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yv07w3_di" bpmnElement="Flow_0yv07w3">
        <di:waypoint x="1373" y="480" />
        <di:waypoint x="1415" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1il1922_di" bpmnElement="Flow_1il1922">
        <di:waypoint x="1290" y="340" />
        <di:waypoint x="1385" y="340" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1y138le_di" bpmnElement="Event_1y138le">
        <dc:Bounds x="930" y="382" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qj5yon_di" bpmnElement="Gateway_1qj5yon" isMarkerVisible="true">
        <dc:Bounds x="1003" y="375" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1068" y="393" width="59" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_13dfhiy_di" bpmnElement="Gateway_13dfhiy" isMarkerVisible="true">
        <dc:Bounds x="1118" y="455" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1108" y="512" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1bvrgar_di" bpmnElement="Event_1bvrgar">
        <dc:Bounds x="1415" y="462" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0vqkz67_di" bpmnElement="Activity_0vqkz67">
        <dc:Bounds x="1273" y="440" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0jm5ix8_di" bpmnElement="Event_0jm5ix8">
        <dc:Bounds x="1385" y="322" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1377" y="365" width="52" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jn957p_di" bpmnElement="Activity_0jn957p">
        <dc:Bounds x="1190" y="300" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0u8wers_di" bpmnElement="DataStoreReference_0u8wers">
        <dc:Bounds x="795" y="520" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="779" y="499" width="83" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1hbwfmo_di" bpmnElement="Event_1hbwfmo">
        <dc:Bounds x="1475" y="262" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1500" y="244" width="26" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_0fvx3ze_di" bpmnElement="Participant_0fvx3ze" isHorizontal="true">
        <dc:Bounds x="150" y="240" width="360" height="140" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1sd3xii_di" bpmnElement="Flow_1sd3xii">
        <di:waypoint x="258" y="300" />
        <di:waypoint x="300" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05mxbse_di" bpmnElement="Flow_05mxbse">
        <di:waypoint x="400" y="300" />
        <di:waypoint x="442" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_06ciytq_di" bpmnElement="Event_06ciytq">
        <dc:Bounds x="222" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0gr7u82_di" bpmnElement="Event_0gr7u82">
        <dc:Bounds x="442" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0z8iofb_di" bpmnElement="Activity_0z8iofb">
        <dc:Bounds x="300" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataInputAssociation_0k9ic5c_di" bpmnElement="DataInputAssociation_0k9ic5c">
        <di:waypoint x="818" y="520" />
        <di:waypoint x="803" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1k8m9na_di" bpmnElement="Flow_1k8m9na">
        <di:waypoint x="372" y="260" />
        <di:waypoint x="372" y="220" />
        <di:waypoint x="420" y="220" />
        <di:waypoint x="420" y="158" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qowbtb_di" bpmnElement="Flow_1qowbtb">
        <di:waypoint x="1220" y="180" />
        <di:waypoint x="1220" y="220" />
        <di:waypoint x="650" y="220" />
        <di:waypoint x="650" y="292" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ei1d5f_di" bpmnElement="Flow_0ei1d5f">
        <di:waypoint x="1250" y="300" />
        <di:waypoint x="1250" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qpb6uo_di" bpmnElement="Flow_0qpb6uo">
        <di:waypoint x="1323" y="440" />
        <di:waypoint x="1323" y="220" />
        <di:waypoint x="1280" y="220" />
        <di:waypoint x="1280" y="180" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
