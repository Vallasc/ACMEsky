{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{zrcO:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"UsersModule\",(function(){return q}));var n=r(\"3Pt+\"),s=r(\"ofXK\"),i=r(\"tyNb\"),b=r(\"fXoL\");let o=(()=>{class e{}return e.\\u0275fac=function(t){return new(t||e)},e.\\u0275cmp=b.Bb({type:e,selectors:[[\"ng-component\"]],decls:3,vars:0,consts:[[1,\"p-4\"],[1,\"container\"]],template:function(e,t){1&e&&(b.Kb(0,\"div\",0),b.Kb(1,\"div\",1),b.Ib(2,\"router-outlet\"),b.Jb(),b.Jb())},directives:[i.f],encapsulation:2}),e})();var c=r(\"SxV6\"),d=r(\"J9tS\");function a(e,t){1&e&&b.Ib(0,\"span\",10)}function u(e,t){1&e&&(b.Kb(0,\"span\"),b.dc(1,\"Elimina\"),b.Jb())}function f(e,t){if(1&e){const e=b.Lb();b.Kb(0,\"tr\"),b.Kb(1,\"td\"),b.dc(2),b.Jb(),b.Kb(3,\"td\"),b.dc(4),b.Jb(),b.Kb(5,\"td\"),b.dc(6),b.Jb(),b.Kb(7,\"td\",6),b.Kb(8,\"a\",7),b.dc(9,\"Modifica\"),b.Jb(),b.Kb(10,\"button\",8),b.Rb(\"click\",(function(){b.Zb(e);const r=t.$implicit;return b.Tb().deleteUser(r._id)})),b.cc(11,a,1,0,\"span\",9),b.cc(12,u,2,0,\"span\",5),b.Jb(),b.Jb(),b.Jb()}if(2&e){const e=t.$implicit;b.xb(2),b.ec(e.name),b.xb(2),b.ec(e.secondName),b.xb(2),b.ec(e.username),b.xb(2),b.Vb(\"routerLink\",\"edit/\",e._id,\"\"),b.xb(3),b.Ub(\"ngIf\",e.isDeleting),b.xb(1),b.Ub(\"ngIf\",!e.isDeleting)}}function l(e,t){1&e&&(b.Kb(0,\"tr\"),b.Kb(1,\"td\",11),b.Ib(2,\"span\",12),b.Jb(),b.Jb())}let m=(()=>{class e{constructor(e){this.accountService=e,this.users=[]}ngOnInit(){this.accountService.getAll().subscribe(e=>this.users=e)}basicDetails(e){const{_id:t,email:r,name:n,password:s,secondName:i,username:b,token:o}=e;return{_id:t,email:r,name:n,password:s,secondName:i,username:b,token:o}}deleteUser(e){this.users.find(t=>t._id===e),this.accountService.delete(e).pipe(Object(c.a)()).subscribe(()=>this.users=this.users.filter(t=>t._id!==e))}}return e.\\u0275fac=function(t){return new(t||e)(b.Hb(d.a))},e.\\u0275cmp=b.Bb({type:e,selectors:[[\"ng-component\"]],decls:17,vars:2,consts:[[\"routerLink\",\"add\",1,\"btn\",\"btn-sm\",\"btn-success\",\"mb-2\"],[1,\"table\",\"table-striped\"],[2,\"width\",\"30%\"],[2,\"width\",\"10%\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[2,\"white-space\",\"nowrap\"],[1,\"btn\",\"btn-sm\",\"btn-primary\",\"mr-1\",3,\"routerLink\"],[1,\"btn\",\"btn-sm\",\"btn-danger\",\"btn-delete-user\",3,\"click\"],[\"class\",\"spinner-border spinner-border-sm\",4,\"ngIf\"],[1,\"spinner-border\",\"spinner-border-sm\"],[\"colspan\",\"4\",1,\"text-center\"],[1,\"spinner-border\",\"spinner-border-lg\",\"align-center\"]],template:function(e,t){1&e&&(b.Kb(0,\"h1\"),b.dc(1,\"Utenti\"),b.Jb(),b.Kb(2,\"a\",0),b.dc(3,\"Aggiungi utente\"),b.Jb(),b.Kb(4,\"table\",1),b.Kb(5,\"thead\"),b.Kb(6,\"tr\"),b.Kb(7,\"th\",2),b.dc(8,\"Nome\"),b.Jb(),b.Kb(9,\"th\",2),b.dc(10,\"Cognome\"),b.Jb(),b.Kb(11,\"th\",2),b.dc(12,\"Username\"),b.Jb(),b.Ib(13,\"th\",3),b.Jb(),b.Jb(),b.Kb(14,\"tbody\"),b.cc(15,f,13,6,\"tr\",4),b.cc(16,l,3,0,\"tr\",5),b.Jb(),b.Jb()),2&e&&(b.xb(15),b.Ub(\"ngForOf\",t.users),b.xb(1),b.Ub(\"ngIf\",!t.users))},directives:[i.d,s.i,s.j],encapsulation:2}),e})();function p(e,t){1&e&&(b.Kb(0,\"h1\"),b.dc(1,\"Aggiungi utente\"),b.Jb())}function h(e,t){1&e&&(b.Kb(0,\"h1\"),b.dc(1,\"Modifica utente\"),b.Jb())}function g(e,t){1&e&&(b.Kb(0,\"div\"),b.dc(1,\"Nome obbligatorio\"),b.Jb())}function v(e,t){if(1&e&&(b.Kb(0,\"div\",17),b.cc(1,g,2,0,\"div\",0),b.Jb()),2&e){const e=b.Tb();b.xb(1),b.Ub(\"ngIf\",e.f.name.errors.required)}}function J(e,t){1&e&&(b.Kb(0,\"div\"),b.dc(1,\"Cognome obbligatorio\"),b.Jb())}function K(e,t){if(1&e&&(b.Kb(0,\"div\",17),b.cc(1,J,2,0,\"div\",0),b.Jb()),2&e){const e=b.Tb();b.xb(1),b.Ub(\"ngIf\",e.f.secondName.errors.required)}}function U(e,t){1&e&&(b.Kb(0,\"div\"),b.dc(1,\"Username obbligatorio\"),b.Jb())}function x(e,t){if(1&e&&(b.Kb(0,\"div\",17),b.cc(1,U,2,0,\"div\",0),b.Jb()),2&e){const e=b.Tb();b.xb(1),b.Ub(\"ngIf\",e.f.username.errors.required)}}function I(e,t){1&e&&(b.Kb(0,\"em\"),b.dc(1,\"(Non inserire la password se vuoi lasciare quella precedente)\"),b.Jb())}function w(e,t){1&e&&(b.Kb(0,\"div\"),b.dc(1,\"Password obbligatoria\"),b.Jb())}function S(e,t){1&e&&(b.Kb(0,\"div\"),b.dc(1,\"La password deve essere almeno di 6 caratteri\"),b.Jb())}function C(e,t){if(1&e&&(b.Kb(0,\"div\",17),b.cc(1,w,2,0,\"div\",0),b.cc(2,S,2,0,\"div\",0),b.Jb()),2&e){const e=b.Tb();b.xb(1),b.Ub(\"ngIf\",e.f.password.errors.required),b.xb(1),b.Ub(\"ngIf\",e.f.password.errors.minlength)}}function N(e,t){1&e&&b.Ib(0,\"span\",18)}const y=function(e){return{\"is-invalid\":e}};let k=(()=>{class e{constructor(e,t,r,n,s){this.formBuilder=e,this.route=t,this.router=r,this.accountService=n,this.alertService=s,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[n.h.minLength(6)];this.isAddMode&&e.push(n.h.required),this.form=this.formBuilder.group({name:[\"\",n.h.required],secondName:[\"\",n.h.required],username:[\"\",n.h.required],password:[\"\",e]}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(c.a)()).subscribe(e=>this.form.patchValue(e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.createUser(this.form.value).pipe(Object(c.a)()).subscribe({next:()=>{this.alertService.success(\"User added successfully\",{keepAfterRouteChange:!0}),this.router.navigate([\"../\"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}updateUser(){this.accountService.update(this.id,this.form.value).pipe(Object(c.a)()).subscribe({next:()=>{this.alertService.success(\"Update successful\",{keepAfterRouteChange:!0}),this.router.navigate([\"../../\"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\\u0275fac=function(t){return new(t||e)(b.Hb(n.b),b.Hb(i.a),b.Hb(i.b),b.Hb(d.a),b.Hb(d.b))},e.\\u0275cmp=b.Bb({type:e,selectors:[[\"ng-component\"]],decls:32,vars:22,consts:[[4,\"ngIf\"],[3,\"formGroup\",\"ngSubmit\"],[1,\"form-row\"],[1,\"form-group\",\"col\"],[\"for\",\"name\"],[\"type\",\"text\",\"formControlName\",\"name\",1,\"form-control\",3,\"ngClass\"],[\"class\",\"invalid-feedback\",4,\"ngIf\"],[\"for\",\"secondName\"],[\"type\",\"text\",\"formControlName\",\"secondName\",1,\"form-control\",3,\"ngClass\"],[\"for\",\"username\"],[\"type\",\"text\",\"formControlName\",\"username\",1,\"form-control\",3,\"ngClass\"],[\"for\",\"password\"],[\"type\",\"password\",\"formControlName\",\"password\",1,\"form-control\",3,\"ngClass\"],[1,\"form-group\"],[1,\"btn\",\"btn-primary\",3,\"disabled\"],[\"class\",\"spinner-border spinner-border-sm mr-1\",4,\"ngIf\"],[\"routerLink\",\"/users\",1,\"btn\",\"btn-link\"],[1,\"invalid-feedback\"],[1,\"spinner-border\",\"spinner-border-sm\",\"mr-1\"]],template:function(e,t){1&e&&(b.cc(0,p,2,0,\"h1\",0),b.cc(1,h,2,0,\"h1\",0),b.Kb(2,\"form\",1),b.Rb(\"ngSubmit\",(function(){return t.onSubmit()})),b.Kb(3,\"div\",2),b.Kb(4,\"div\",3),b.Kb(5,\"label\",4),b.dc(6,\"Nome\"),b.Jb(),b.Ib(7,\"input\",5),b.cc(8,v,2,1,\"div\",6),b.Jb(),b.Kb(9,\"div\",3),b.Kb(10,\"label\",7),b.dc(11,\"Cognome\"),b.Jb(),b.Ib(12,\"input\",8),b.cc(13,K,2,1,\"div\",6),b.Jb(),b.Jb(),b.Kb(14,\"div\",2),b.Kb(15,\"div\",3),b.Kb(16,\"label\",9),b.dc(17,\"Username\"),b.Jb(),b.Ib(18,\"input\",10),b.cc(19,x,2,1,\"div\",6),b.Jb(),b.Kb(20,\"div\",3),b.Kb(21,\"label\",11),b.dc(22,\" Password \"),b.cc(23,I,2,0,\"em\",0),b.Jb(),b.Ib(24,\"input\",12),b.cc(25,C,3,2,\"div\",6),b.Jb(),b.Jb(),b.Kb(26,\"div\",13),b.Kb(27,\"button\",14),b.cc(28,N,1,0,\"span\",15),b.dc(29,\" Salva \"),b.Jb(),b.Kb(30,\"a\",16),b.dc(31,\"Cancella\"),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.Ub(\"ngIf\",t.isAddMode),b.xb(1),b.Ub(\"ngIf\",!t.isAddMode),b.xb(1),b.Ub(\"formGroup\",t.form),b.xb(5),b.Ub(\"ngClass\",b.Xb(14,y,t.submitted&&t.f.name.errors)),b.xb(1),b.Ub(\"ngIf\",t.submitted&&t.f.name.errors),b.xb(4),b.Ub(\"ngClass\",b.Xb(16,y,t.submitted&&t.f.secondName.errors)),b.xb(1),b.Ub(\"ngIf\",t.submitted&&t.f.secondName.errors),b.xb(5),b.Ub(\"ngClass\",b.Xb(18,y,t.submitted&&t.f.username.errors)),b.xb(1),b.Ub(\"ngIf\",t.submitted&&t.f.username.errors),b.xb(4),b.Ub(\"ngIf\",!t.isAddMode),b.xb(1),b.Ub(\"ngClass\",b.Xb(20,y,t.submitted&&t.f.password.errors)),b.xb(1),b.Ub(\"ngIf\",t.submitted&&t.f.password.errors),b.xb(2),b.Ub(\"disabled\",t.loading),b.xb(1),b.Ub(\"ngIf\",t.loading))},directives:[s.j,n.i,n.f,n.d,n.a,n.e,n.c,s.h,i.d],encapsulation:2}),e})();const A=[{path:\"\",component:o,children:[{path:\"\",component:m},{path:\"add\",component:k},{path:\"edit/:id\",component:k}]}];let M=(()=>{class e{}return e.\\u0275mod=b.Fb({type:e}),e.\\u0275inj=b.Eb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(A)],i.e]}),e})(),q=(()=>{class e{}return e.\\u0275mod=b.Fb({type:e}),e.\\u0275inj=b.Eb({factory:function(t){return new(t||e)},imports:[[s.b,n.g,M]]}),e})()}}]);","extractedComments":[]}