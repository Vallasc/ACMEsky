{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{zrcO:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"UsersModule\",(function(){return M}));var n=r(\"3Pt+\"),i=r(\"ofXK\"),s=r(\"tyNb\"),o=r(\"fXoL\");let b=(()=>{class e{}return e.\\u0275fac=function(t){return new(t||e)},e.\\u0275cmp=o.Cb({type:e,selectors:[[\"ng-component\"]],decls:3,vars:0,consts:[[1,\"p-4\"],[1,\"container\"]],template:function(e,t){1&e&&(o.Lb(0,\"div\",0),o.Lb(1,\"div\",1),o.Jb(2,\"router-outlet\"),o.Kb(),o.Kb())},directives:[s.g],encapsulation:2}),e})();var c=r(\"SxV6\"),a=r(\"J9tS\");function d(e,t){1&e&&o.Jb(0,\"span\",10)}function u(e,t){1&e&&(o.Lb(0,\"span\"),o.fc(1,\"Elimina\"),o.Kb())}function f(e,t){if(1&e){const e=o.Mb();o.Lb(0,\"tr\"),o.Lb(1,\"td\"),o.fc(2),o.Kb(),o.Lb(3,\"td\"),o.fc(4),o.Kb(),o.Lb(5,\"td\"),o.fc(6),o.Kb(),o.Lb(7,\"td\",6),o.Lb(8,\"a\",7),o.fc(9,\"Modifica\"),o.Kb(),o.Lb(10,\"button\",8),o.Sb(\"click\",(function(){o.ac(e);const r=t.$implicit;return o.Ub().deleteUser(r.id)})),o.ec(11,d,1,0,\"span\",9),o.ec(12,u,2,0,\"span\",5),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(2),o.gc(e.nome),o.xb(2),o.gc(e.cognome),o.xb(2),o.gc(e.username),o.xb(2),o.Wb(\"routerLink\",\"edit/\",e.id,\"\"),o.xb(2),o.Vb(\"disabled\",e.isDeleting),o.xb(1),o.Vb(\"ngIf\",e.isDeleting),o.xb(1),o.Vb(\"ngIf\",!e.isDeleting)}}function l(e,t){1&e&&(o.Lb(0,\"tr\"),o.Lb(1,\"td\",11),o.Jb(2,\"span\",12),o.Kb(),o.Kb())}let m=(()=>{class e{constructor(e){this.accountService=e,this.users=null}ngOnInit(){this.accountService.getAll().pipe(Object(c.a)()).subscribe(e=>this.users=e)}deleteUser(e){this.users.find(t=>t.id===e).isDeleting=!0,this.accountService.delete(e).pipe(Object(c.a)()).subscribe(()=>this.users=this.users.filter(t=>t.id!==e))}}return e.\\u0275fac=function(t){return new(t||e)(o.Ib(a.a))},e.\\u0275cmp=o.Cb({type:e,selectors:[[\"ng-component\"]],decls:17,vars:2,consts:[[\"routerLink\",\"add\",1,\"btn\",\"btn-sm\",\"btn-success\",\"mb-2\"],[1,\"table\",\"table-striped\"],[2,\"width\",\"30%\"],[2,\"width\",\"10%\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[2,\"white-space\",\"nowrap\"],[1,\"btn\",\"btn-sm\",\"btn-primary\",\"mr-1\",3,\"routerLink\"],[1,\"btn\",\"btn-sm\",\"btn-danger\",\"btn-delete-user\",3,\"disabled\",\"click\"],[\"class\",\"spinner-border spinner-border-sm\",4,\"ngIf\"],[1,\"spinner-border\",\"spinner-border-sm\"],[\"colspan\",\"4\",1,\"text-center\"],[1,\"spinner-border\",\"spinner-border-lg\",\"align-center\"]],template:function(e,t){1&e&&(o.Lb(0,\"h1\"),o.fc(1,\"Utenti\"),o.Kb(),o.Lb(2,\"a\",0),o.fc(3,\"Aggiungi utente\"),o.Kb(),o.Lb(4,\"table\",1),o.Lb(5,\"thead\"),o.Lb(6,\"tr\"),o.Lb(7,\"th\",2),o.fc(8,\"Nome\"),o.Kb(),o.Lb(9,\"th\",2),o.fc(10,\"Cognome\"),o.Kb(),o.Lb(11,\"th\",2),o.fc(12,\"Username\"),o.Kb(),o.Jb(13,\"th\",3),o.Kb(),o.Kb(),o.Lb(14,\"tbody\"),o.ec(15,f,13,7,\"tr\",4),o.ec(16,l,3,0,\"tr\",5),o.Kb(),o.Kb()),2&e&&(o.xb(15),o.Vb(\"ngForOf\",t.users),o.xb(1),o.Vb(\"ngIf\",!t.users))},directives:[s.e,i.i,i.j],encapsulation:2}),e})();function p(e,t){1&e&&(o.Lb(0,\"h1\"),o.fc(1,\"Aggiungi utente\"),o.Kb())}function g(e,t){1&e&&(o.Lb(0,\"h1\"),o.fc(1,\"Modifica utente\"),o.Kb())}function h(e,t){1&e&&(o.Lb(0,\"div\"),o.fc(1,\"Nome obbligatorio\"),o.Kb())}function v(e,t){if(1&e&&(o.Lb(0,\"div\",17),o.ec(1,h,2,0,\"div\",0),o.Kb()),2&e){const e=o.Ub();o.xb(1),o.Vb(\"ngIf\",e.f.nome.errors.required)}}function L(e,t){1&e&&(o.Lb(0,\"div\"),o.fc(1,\"Cognome obbligatorio\"),o.Kb())}function K(e,t){if(1&e&&(o.Lb(0,\"div\",17),o.ec(1,L,2,0,\"div\",0),o.Kb()),2&e){const e=o.Ub();o.xb(1),o.Vb(\"ngIf\",e.f.cognome.errors.required)}}function x(e,t){1&e&&(o.Lb(0,\"div\"),o.fc(1,\"Username obbligatorio\"),o.Kb())}function I(e,t){if(1&e&&(o.Lb(0,\"div\",17),o.ec(1,x,2,0,\"div\",0),o.Kb()),2&e){const e=o.Ub();o.xb(1),o.Vb(\"ngIf\",e.f.username.errors.required)}}function w(e,t){1&e&&(o.Lb(0,\"em\"),o.fc(1,\"(Non inserire la password se vuoi lasciare quella precedente)\"),o.Kb())}function V(e,t){1&e&&(o.Lb(0,\"div\"),o.fc(1,\"Password obbligatoria\"),o.Kb())}function C(e,t){1&e&&(o.Lb(0,\"div\"),o.fc(1,\"La password deve essere almeno di 6 caratteri\"),o.Kb())}function S(e,t){if(1&e&&(o.Lb(0,\"div\",17),o.ec(1,V,2,0,\"div\",0),o.ec(2,C,2,0,\"div\",0),o.Kb()),2&e){const e=o.Ub();o.xb(1),o.Vb(\"ngIf\",e.f.password.errors.required),o.xb(1),o.Vb(\"ngIf\",e.f.password.errors.minlength)}}function U(e,t){1&e&&o.Jb(0,\"span\",18)}const y=function(e){return{\"is-invalid\":e}};let k=(()=>{class e{constructor(e,t,r,n,i){this.formBuilder=e,this.route=t,this.router=r,this.accountService=n,this.alertService=i,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[n.h.minLength(6)];this.isAddMode&&e.push(n.h.required),this.form=this.formBuilder.group({nome:[\"\",n.h.required],cognome:[\"\",n.h.required],username:[\"\",n.h.required],password:[\"\",e]}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(c.a)()).subscribe(e=>this.form.patchValue(e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.register(this.form.value).pipe(Object(c.a)()).subscribe({next:()=>{this.alertService.success(\"User added successfully\",{keepAfterRouteChange:!0}),this.router.navigate([\"../\"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}updateUser(){this.accountService.update(this.id,this.form.value).pipe(Object(c.a)()).subscribe({next:()=>{this.alertService.success(\"Update successful\",{keepAfterRouteChange:!0}),this.router.navigate([\"../../\"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\\u0275fac=function(t){return new(t||e)(o.Ib(n.b),o.Ib(s.a),o.Ib(s.c),o.Ib(a.a),o.Ib(a.b))},e.\\u0275cmp=o.Cb({type:e,selectors:[[\"ng-component\"]],decls:32,vars:22,consts:[[4,\"ngIf\"],[3,\"formGroup\",\"ngSubmit\"],[1,\"form-row\"],[1,\"form-group\",\"col\"],[\"for\",\"nome\"],[\"type\",\"text\",\"formControlName\",\"nome\",1,\"form-control\",3,\"ngClass\"],[\"class\",\"invalid-feedback\",4,\"ngIf\"],[\"for\",\"cognome\"],[\"type\",\"text\",\"formControlName\",\"cognome\",1,\"form-control\",3,\"ngClass\"],[\"for\",\"username\"],[\"type\",\"text\",\"formControlName\",\"username\",1,\"form-control\",3,\"ngClass\"],[\"for\",\"password\"],[\"type\",\"password\",\"formControlName\",\"password\",1,\"form-control\",3,\"ngClass\"],[1,\"form-group\"],[1,\"btn\",\"btn-primary\",3,\"disabled\"],[\"class\",\"spinner-border spinner-border-sm mr-1\",4,\"ngIf\"],[\"routerLink\",\"/users\",1,\"btn\",\"btn-link\"],[1,\"invalid-feedback\"],[1,\"spinner-border\",\"spinner-border-sm\",\"mr-1\"]],template:function(e,t){1&e&&(o.ec(0,p,2,0,\"h1\",0),o.ec(1,g,2,0,\"h1\",0),o.Lb(2,\"form\",1),o.Sb(\"ngSubmit\",(function(){return t.onSubmit()})),o.Lb(3,\"div\",2),o.Lb(4,\"div\",3),o.Lb(5,\"label\",4),o.fc(6,\"Nome\"),o.Kb(),o.Jb(7,\"input\",5),o.ec(8,v,2,1,\"div\",6),o.Kb(),o.Lb(9,\"div\",3),o.Lb(10,\"label\",7),o.fc(11,\"Cognome\"),o.Kb(),o.Jb(12,\"input\",8),o.ec(13,K,2,1,\"div\",6),o.Kb(),o.Kb(),o.Lb(14,\"div\",2),o.Lb(15,\"div\",3),o.Lb(16,\"label\",9),o.fc(17,\"Username\"),o.Kb(),o.Jb(18,\"input\",10),o.ec(19,I,2,1,\"div\",6),o.Kb(),o.Lb(20,\"div\",3),o.Lb(21,\"label\",11),o.fc(22,\" Password \"),o.ec(23,w,2,0,\"em\",0),o.Kb(),o.Jb(24,\"input\",12),o.ec(25,S,3,2,\"div\",6),o.Kb(),o.Kb(),o.Lb(26,\"div\",13),o.Lb(27,\"button\",14),o.ec(28,U,1,0,\"span\",15),o.fc(29,\" Salva \"),o.Kb(),o.Lb(30,\"a\",16),o.fc(31,\"Cancella\"),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.Vb(\"ngIf\",t.isAddMode),o.xb(1),o.Vb(\"ngIf\",!t.isAddMode),o.xb(1),o.Vb(\"formGroup\",t.form),o.xb(5),o.Vb(\"ngClass\",o.Yb(14,y,t.submitted&&t.f.nome.errors)),o.xb(1),o.Vb(\"ngIf\",t.submitted&&t.f.nome.errors),o.xb(4),o.Vb(\"ngClass\",o.Yb(16,y,t.submitted&&t.f.cognome.errors)),o.xb(1),o.Vb(\"ngIf\",t.submitted&&t.f.cognome.errors),o.xb(5),o.Vb(\"ngClass\",o.Yb(18,y,t.submitted&&t.f.username.errors)),o.xb(1),o.Vb(\"ngIf\",t.submitted&&t.f.username.errors),o.xb(4),o.Vb(\"ngIf\",!t.isAddMode),o.xb(1),o.Vb(\"ngClass\",o.Yb(20,y,t.submitted&&t.f.password.errors)),o.xb(1),o.Vb(\"ngIf\",t.submitted&&t.f.password.errors),o.xb(2),o.Vb(\"disabled\",t.loading),o.xb(1),o.Vb(\"ngIf\",t.loading))},directives:[i.j,n.i,n.f,n.d,n.a,n.e,n.c,i.h,s.e],encapsulation:2}),e})();const A=[{path:\"\",component:b,children:[{path:\"\",component:m},{path:\"add\",component:k},{path:\"edit/:id\",component:k}]}];let J=(()=>{class e{}return e.\\u0275mod=o.Gb({type:e}),e.\\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[s.f.forChild(A)],s.f]}),e})(),M=(()=>{class e{}return e.\\u0275mod=o.Gb({type:e}),e.\\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[i.b,n.g,J]]}),e})()}}]);","extractedComments":[]}