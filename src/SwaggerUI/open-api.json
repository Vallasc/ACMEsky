{"openapi":"3.0.1","info":{"title":"ACMEsky service","description":"ACMEskyService è il servizio principale di ACMEsky che si relaziona con gli altri (ACMEskyWeb, AirlineServices, RentServices, Prontogram, BankService,...) al fine di consentire agli utenti di prenotare ed acquistare le offerte di voli che desiderano. Prima di fare richieste alle risorse che richiedono l'autenticazione i servizi devono autenticarsi effettuando una richiesta POST ad '/auth' con username e password. Il token JWT ricevuto deve essere accompagnare ogni che viene fatta al servizio. A seconda del servizio i path a cui potrà accedere saranno differenti.","version":"1.0"},"servers":[{"url":"http://acmesky.duckdns.org:8080","variables":{}}],"paths":{"/airlines/last_minute":{"post":{"summary":"Riceve i voli last-minute","description":"Permette ricevere i voli last minute dall compagnia aerea. Risorsa disponibile alle compagnie aeree registrate.","operationId":"saveInterests","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AirlineFlightOfferDTO"}}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}},"/auth":{"post":{"summary":"Autenticazione","description":"Permette di autenticarsi nel sistema, viene restituito un JWT. Risorsa disponibile a tutte le entità del sistema.","operationId":"authenticate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequestDTO"}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuthResponseDTO"}}}}},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"}}}},"/auth/refresh":{"put":{"summary":"Refresh JWT","description":"Permette di richiedere un nuovo token utilizzando uno ancora non scaduto. Risorsa disponibile a tutte le entità del sistema.","operationId":"refresh","responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AuthResponseDTO"}}}}},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}},"/banks/confirmPayment":{"get":{"summary":"Conferma pagamento","description":"conferma dell'avvenuto pagamento da parte della banca. Risorsa esclusiva della banca.","operationId":"confirmPayment","parameters":[{"name":"code","in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}},"/airports/{code}":{"get":{"summary":"Get areoporto","description":"Restituisce l'areoporto dato il codice. Risorsa esclusiva dell'utente.","operationId":"getAirport","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AirportDTO"}}}},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Areoporto non trovato"}},"security":[{"bearerAuth":[]}]}},"/airports":{"get":{"summary":"Lista degli areoporti filtrati","description":"Restituisce la lista degli aereoporti filtrati dato il parametro query. Risorsa esclusiva dell'utente.","operationId":"getAirports","parameters":[{"name":"query","in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta non corretta","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AirportDTO"}}}}},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}},"/interests/{id}":{"get":{"summary":"Get interesse","description":"Restituisce l'interesse specificato dall'id. Risorsa esclusiva dell'utente.","operationId":"getInterest","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInterestDTO"}}}},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Interesse non trovato"}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Rimuove interesse","description":"Rimuove l'interesse specificato dall'id. Risorsa esclusiva dell'utente.","operationId":"deleteInterest","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Interesse non trovato"}},"security":[{"bearerAuth":[]}]}},"/interests":{"get":{"summary":"Get interessi","description":"Restituisce la lista degli interessi dell'utente. Risorsa esclusiva dell'utente.","operationId":"getInterests","responses":{"200":{"description":"Richiesta non corretta","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserInterestDTO"}}}}},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Salva interesse","description":"Salva l'interesse per una specifica tratta. Risorsa esclusiva dell'utente.","operationId":"saveInterests_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInterestDTO"}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}},"/offers/confirm":{"put":{"summary":"Conferma l'offerta","description":"Conferma l'offerta dato il codice.  Risorsa esclusiva dell'utente.","operationId":"confirmOfferToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOfferDTO"}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Offerta non trovata"}},"security":[{"bearerAuth":[]}]}},"/offers/{token}":{"get":{"summary":"Get offer","description":"Restituisce l'offerta dato il codice. Risorsa esclusiva dell'utente.","operationId":"getOffer","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfferDTO"}}}},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Offerta non trovata"}},"security":[{"bearerAuth":[]}]}},"/offers":{"get":{"summary":"Get offers","description":"Restituisce le offerte dell'utente. Risorsa esclusiva dell'utente.","operationId":"getOffers","responses":{"200":{"description":"Richiesta non corretta","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OfferDTO"}}}}},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}},"/offers/{token}/ticket":{"get":{"summary":"Get offer ticket","description":"Restituisce il ticket dell'offerta dato il codice. Risorsa esclusiva dell'utente.","operationId":"getTickets","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Richiesta elaborata correttamente"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Offerta non trovata"}},"security":[{"bearerAuth":[]}]}},"/offers/paymentLink":{"put":{"summary":"Rchiesta link di pagamento","description":"Richiesta link di pagamento dato il codice offerta. Risorsa esclusiva dell'utente.","operationId":"requestPaymentLink","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressDTO"}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Offerta non trovata"}},"security":[{"bearerAuth":[]}]}},"/offers/reset":{"put":{"summary":"Reset del processo di acquisto","description":"Reset del processo di acquisto dell'offerta. Risorsa esclusiva dell'utente.","operationId":"resetProcess","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOfferDTO"}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"},"404":{"description":"Offerta non trovata"}},"security":[{"bearerAuth":[]}]}},"/users":{"post":{"summary":"Creazione utente","description":"Registra un utente nel sistema. Risorsa esclusiva dell'utente.","operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSignUpDTO"}}}},"responses":{"201":{"description":"Risorsa creata correttamente"},"400":{"description":"Parametri della richiesta non corretti"},"409":{"description":"Utente non esistente"},"500":{"description":"Errore interno"}}}},"/users/me":{"get":{"summary":"Richiesta utente","description":"Restituisce l'utente identificato con il token jwt.  Risorsa esclusiva dell'utente.","operationId":"getUser","responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]},"put":{"summary":"Aggiornamento utente","description":"Aggiorna gli attributi dell'utente identificato con il token jwt. Risorsa esclusiva dell'utente.","operationId":"updateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDTO"}}}},"responses":{"200":{"description":"Richiesta elaborata correttamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"400":{"description":"Parametri della richiesta non corretti"},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Eliminazione utente","description":"Elimina l'utente identificato con il token jwt. Risorsa esclusiva dell'utente.","operationId":"deleteUser","responses":{"200":{"description":"Richiesta elaborata correttamente"},"401":{"description":"Entità non autorizzta"}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"AirlineFlightOfferDTO":{"type":"object","properties":{"id":{"type":"string"},"departureCode":{"type":"string"},"departureTime":{"type":"string"},"arrivalTime":{"type":"string"},"arrivalCode":{"type":"string"},"expDate":{"type":"string"},"airlineName":{"type":"string"},"price":{"type":"number","format":"float"},"airlinename":{"type":"string","writeOnly":true},"departureAirportCode":{"type":"string","writeOnly":true}}},"AuthResponseDTO":{"type":"object","properties":{"token":{"type":"string"}}},"AuthRequestDTO":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"AirportDTO":{"type":"object","properties":{"code":{"type":"string"},"name":{"type":"string"},"cityName":{"type":"string"},"countryCode":{"type":"string"}}},"FlightInterestDTO":{"required":["arrivalAirportCode","departureAirportCode","departureTimestamp"],"type":"object","properties":{"departureAirportCode":{"type":"string"},"arrivalAirportCode":{"type":"string"},"departureTimestamp":{"type":"string"}}},"UserInterestDTO":{"required":["flightBack","outboundFlight","priceLimit"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"outboundFlight":{"$ref":"#/components/schemas/FlightInterestDTO"},"flightBack":{"$ref":"#/components/schemas/FlightInterestDTO"},"priceLimit":{"maximum":10000,"minimum":10,"type":"number","format":"double"}}},"UserOfferDTO":{"required":["offerToken"],"type":"object","properties":{"offerToken":{"type":"string"}}},"FlightDTO":{"type":"object","properties":{"flightCode":{"type":"string"},"departureAirportCode":{"type":"string"},"arrivalAirportCode":{"type":"string"},"departureCity":{"type":"string"},"arrivalCity":{"type":"string"},"departureTimestamp":{"type":"string"},"arrivalTimestamp":{"type":"string"},"price":{"type":"number","format":"float"},"airlineName":{"type":"string"},"airlinename":{"type":"string","writeOnly":true}}},"OfferDTO":{"type":"object","properties":{"outboundFlight":{"$ref":"#/components/schemas/FlightDTO"},"flightBack":{"$ref":"#/components/schemas/FlightDTO"},"totalPrice":{"type":"number","format":"float"},"token":{"type":"string"},"rent":{"type":"boolean"}}},"AddressDTO":{"type":"object","properties":{"offerToken":{"type":"string"},"postCode":{"type":"string"},"address":{"type":"string"},"cityName":{"type":"string"},"country":{"type":"string"}}},"UserSignUpDTO":{"required":["name","password","prontogramUsername","surname"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"},"surname":{"type":"string"},"prontogramUsername":{"type":"string"}}},"UserDTO":{"type":"object","properties":{"email":{"type":"string"},"name":{"type":"string"},"surname":{"type":"string"},"password":{"type":"string"},"prontogramUsername":{"type":"string"}}},"UserUpdateDTO":{"required":["password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"newPassword":{"type":"string"},"newProntogramUsername":{"type":"string"},"newName":{"type":"string"},"newSurname":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}